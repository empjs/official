import Preparation from '../../shared/preparation.md'
import { Tabs, Tab, PackageManagerTabs } from '@theme';

# React Multi Version

demo项目仓库 `emp`:

```bash
git clone https://github.com/empjs/emp
```

:::danger 🚨 可能遇到的错误
如果您无法拉取项目至本地，请检查您的网络环境或代理设置是否可以访问github，如果仍不能解决，请联系我们。
:::

在拉取完成代码后，我们进入代码的根目录，安装项目依赖，推荐使用`PNPM`进行安装：

<PackageManagerTabs command="install" />

安装完依赖后，运行 `demos/react16_18/react-16-app` 示例项目。

## 运行示例项目

:::warning ⚠️ 注意
在运行示例项目之前，请确保您已经完成了前期准备，并当前目录处于`emp`仓库的根目录下。
:::

### mf-host

首先进入示例项目的根目录：

```bash
cd demos/react16_18/react-16-app
```

然后运行代码：
<PackageManagerTabs command="dev" />

运行成功后，您可以访问`http://localhost:4002/`进行查看。


## 演示效果

当您的代码运行成功之后，它应该是这样子的🤩：<a target='_blank' href='https://df-react.sc.empjs.dev/app/'>访问链接</a>

<iframe src="https://df-react.sc.empjs.dev/app/"
  style={{width: '100%', height: '1100px', border: `20px solid #aaa`, borderRadius: '4px', overflow: 'hidden'}}
  title="mf-host"
></iframe>

## 调用依赖 
+ FastMode Runtime
+ react 18
+ react 16 
+ mobx 6
`EMP Runtime`集成了`module federation 2`的组件注册、组件加载以及`withReactAdepter`高阶组件。

主项目`react 16`使用 `FastMode`模式，基站项目`react 18`为常规`module Federation2.0`插件配置，在项目中，主项目使用`EMP Runtime`运行时注册`react18`基站的组件，并使用`EMP Runtime withReactAdepter`实例化`react18`基站组件，让其在`react16`项目中正常运行，同时`react16`的组件使用`EMP Runtime withReactAdepter`实例化的形式插入到远程的`react18`组件之中。

<img src="https://hd-static.yystatic.com/0009975609517240969.png" />